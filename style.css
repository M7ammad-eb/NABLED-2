/* --- Modern & Nice Theme --- */
:root {
  /* Font */
  --font-family-base: 'Cairo', 'Segoe UI', Roboto, Arial, sans-serif;

  /* Colors (Soft Palette) */
  --color-primary: #0e717d; /* NABLED main color */
  --color-primary-light: #e6f2fa;
  --color-primary-dark: #005fa3;

  --color-text-primary: #212529;  /* Dark gray for main text */
  --color-text-secondary: #6c757d; /* Lighter gray for secondary text/icons */
  --color-text-muted: #adb5bd;    /* Muted gray */
  --color-text-on-primary: #ffffff;

  --color-background: #fdfdfd; /* Very light off-white */
  --color-surface: #ffffff;    /* White for cards, dropdowns */
  --color-border: #e9ecef;     /* Light border color */
  --color-input-bg: #f8f9fa;   /* Input background */
  --color-hover-bg: #f1f3f5;   /* Subtle hover background */
  --color-active-bg: #e9ecef;  /* Subtle active background */

  --color-error: #d9534f;
  --color-success: #5cb85c;

  /* Shape & Spacing */
  --border-radius-small: 4px;
  --border-radius-medium: 8px;
  --border-radius-large: 12px;
  --border-radius-pill: 50px; /* Pill shape */

  --spacing-xs: 4px;
  --spacing-sm: 8px;
  --spacing-md: 12px;
  --spacing-lg: 16px;
  --spacing-xl: 24px;
  --spacing-xxl: 32px;

  /* Shadows (Soft & Diffused) */
  --shadow-sm: 0 1px 2px rgba(0, 0, 0, 0.05);
  --shadow-md: 0 3px 6px rgba(0, 0, 0, 0.07);
  --shadow-lg: 0 10px 20px rgba(0, 0, 0, 0.08);

  /* Transitions */
  --transition-fast: 0.15s ease-in-out;
  --transition-base: 0.25s ease-in-out;
}

/* Base styles */
body {
  font-family: var(--font-family-base);
  font-weight: 400; /* Cairo Regular */
  margin: 0;
  background-color: var(--color-background);
  color: var(--color-text-primary);
  display: flex;
  flex-direction: column;
  min-height: 100vh;
  max-height: 100vh;
  overscroll-behavior-y: contain;
  overflow: hidden;
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
  font-size: 16px; /* Base font size */
}

/* Improved scrollbars */
::-webkit-scrollbar { width: 6px; height: 6px; }
::-webkit-scrollbar-track { background: var(--color-border); border-radius: 3px; }
::-webkit-scrollbar-thumb { background: var(--color-text-muted); border-radius: 3px; }
::-webkit-scrollbar-thumb:hover { background: var(--color-text-secondary); }

/* Search Bar Styles */
.search-bar {
  position: sticky; top: 0; z-index: 100; display: flex; align-items: center;
  justify-content: space-between;
  background-color: var(--color-surface);
  padding: var(--spacing-sm) var(--spacing-lg); /* 8px 16px */
  box-shadow: var(--shadow-sm);
  height: 60px;
  box-sizing: border-box; flex-shrink: 0;
  border-bottom: 1px solid var(--color-border);
}

/* Common Header Button Styles */
.header-button {
  background: none; border: none; padding: 0; margin: 0; cursor: pointer;
  display: flex; align-items: center; justify-content: center;
  border-radius: 50%;
  flex-shrink: 0;
  color: var(--color-text-secondary);
  width: 38px; height: 38px;
  transition: background-color var(--transition-fast), color var(--transition-fast);
}
.header-button:hover {
  background-color: var(--color-hover-bg);
  color: var(--color-text-primary);
}
.header-button:active {
  background-color: var(--color-active-bg);
}
.header-button svg { width: 22px; height: 22px; fill: currentColor; }

/* Back Button Styles */
#back-button { order: 4; margin-left: var(--spacing-xs); }
#back-button svg { transform: scaleX(-1); }

/* Header Logo Styles */
#header-logo { display: none; height: 60%; object-fit: contain; margin: 0 auto; order: 2; }

/* Refresh Button Styles (Subtle Icon Button) */
.refresh-button {
  order: 1;
  margin-right: var(--spacing-sm); /* RTL space */
  color: var(--color-success); /* Green for refresh */
}
.refresh-button:hover { background-color: rgba(92, 184, 92, 0.1); }
.refresh-button:active { background-color: rgba(92, 184, 92, 0.15); }
.refresh-button:disabled { cursor: not-allowed; color: var(--color-text-muted); background-color: transparent; }
.refresh-button.loading svg { animation: spin 1s linear infinite; }
@keyframes spin { from { transform: rotate(0deg); } to { transform: rotate(360deg); } }

/* Search Input Styles */
.search-container {
    flex-grow: 1;
    position: relative;
    order: 2;
    margin: 0 var(--spacing-md);
}
.search-input {
  width: 100%;
  padding: var(--spacing-sm) var(--spacing-lg); /* 8px 16px */
  padding-left: 40px; /* Space for clear button */
  border: 1px solid var(--color-border);
  border-radius: var(--border-radius-pill);
  font-size: 0.95rem;
  box-sizing: border-box;
  direction: rtl;
  background-color: var(--color-input-bg);
  color: var(--color-text-primary);
  transition: border-color var(--transition-base), box-shadow var(--transition-base);
  height: 40px;
}
.search-input::placeholder { color: var(--color-text-secondary); opacity: 0.8; }
.search-input:focus {
    outline: none;
    border-color: var(--color-primary);
    background-color: var(--color-surface);
    box-shadow: 0 0 0 3px rgba(var(--color-primary-rgb, 0, 119, 204), 0.15);
}
#clear-search-button {
  position: absolute;
  left: 5px; /* RTL position */
  top: 50%;
  transform: translateY(-50%);
  background: none; border: none;
  font-size: 22px; line-height: 1; padding: 0;
  cursor: pointer; color: var(--color-text-muted);
  display: none;
  height: 30px; width: 30px;
  display: flex; align-items: center; justify-content: center;
  border-radius: 50%;
  transition: background-color var(--transition-fast);
}
#clear-search-button:hover { color: var(--color-text-primary); background-color: var(--color-hover-bg); }

/* Sort Button and Dropdown */
.sort-container { position: relative; order: 3; margin: 0 var(--spacing-xs); }
#sort-button { color: var(--color-text-secondary); }

/* Dropdown / Menu Styling */
#sort-dropdown, #profile-dropdown {
  position: absolute;
  top: calc(100% + var(--spacing-sm)); /* 8px space */
  background-color: var(--color-surface);
  border-radius: var(--border-radius-medium); /* 8px */
  box-shadow: var(--shadow-lg); /* Softer, larger shadow */
  padding: var(--spacing-sm) 0; /* 8px vertical padding */
  z-index: 110;
  min-width: 230px;
  display: none; /* Initially hidden */
  border: 1px solid var(--color-border);
  overflow: hidden;
}
#sort-dropdown { left: 0; right: auto; text-align: right; padding: var(--spacing-lg); } /* 16px padding for sort */
#profile-dropdown { left: var(--spacing-lg); right: auto; min-width: 250px; }

/* Sort Options Styling */
.sort-section { margin-bottom: var(--spacing-lg); }
.sort-section:last-of-type { margin-bottom: var(--spacing-md); }
.sort-label {
  display: block;
  font-weight: 600; /* Cairo SemiBold */
  margin-bottom: var(--spacing-md);
  color: var(--color-text-secondary);
  font-size: 0.85rem;
  padding: 0 var(--spacing-sm);
  text-transform: uppercase;
}
.sort-option {
  display: flex; align-items: center;
  margin-bottom: var(--spacing-xs);
  padding: var(--spacing-md) var(--spacing-lg); /* 12px 16px */
  cursor: pointer;
  border-radius: var(--border-radius-small);
  margin: 0 var(--spacing-sm) var(--spacing-xs) var(--spacing-sm); /* Indent slightly */
  transition: background-color var(--transition-fast);
}
.sort-option:hover { background-color: var(--color-hover-bg); }
.sort-option input[type="radio"] {
  margin-left: var(--spacing-md); /* RTL Space */
  cursor: pointer;
  accent-color: var(--color-primary);
  width: 16px; height: 16px;
  margin-top: -1px; /* Align */
}
.sort-option label { cursor: pointer; font-size: 0.95rem; color: var(--color-text-primary); flex-grow: 1; }

/* Apply Sort Button (Filled Button) */
#apply-sort-button {
  display: block;
  width: calc(100% - var(--spacing-xl)*2); /* Adjust for padding */
  margin: var(--spacing-lg) auto var(--spacing-sm) auto;
  padding: var(--spacing-md) var(--spacing-xl); /* 12px 24px */
  background-color: var(--color-primary);
  border: none;
  color: var(--color-text-on-primary);
  border-radius: var(--border-radius-pill);
  text-align: center;
  cursor: pointer;
  font-size: 0.9rem;
  font-weight: 600; /* Cairo SemiBold */
  transition: background-color var(--transition-fast), box-shadow var(--transition-fast);
  box-shadow: var(--shadow-sm);
  height: 42px;
}
#apply-sort-button:hover { background-color: var(--color-primary-dark); box-shadow: var(--shadow-md); }
#apply-sort-button:active { box-shadow: none; transform: translateY(1px); }

/* Profile Button Style */
#profile-button { order: 4; margin-left: var(--spacing-xs); color: var(--color-text-secondary); }

/* Profile Dropdown Menu Style */
/* Menu Item Styling */
.user-detail, #dropdown-sign-out-button {
    padding: var(--spacing-md) var(--spacing-lg); /* 12px 16px */
    text-align: right; /* RTL */
    white-space: nowrap; overflow: hidden; text-overflow: ellipsis;
    font-size: 0.95rem; color: var(--color-text-primary);
    display: block; /* Ensure full width clickable */
}
#user-email-display {
    font-weight: 600; /* Cairo SemiBold */
    border-bottom: 1px solid var(--color-border);
    margin-bottom: var(--spacing-sm); /* 8px */
    padding-bottom: var(--spacing-md); /* 12px */
}
#user-job-title { font-size: 0.85rem; color: var(--color-text-secondary); padding-top: 0; margin-top: 0; }
#dropdown-sign-out-button {
    width: 100%; box-sizing: border-box;
    background: none; border: none;
    color: var(--color-error);
    cursor: pointer;
    transition: background-color var(--transition-fast);
    margin-top: var(--spacing-sm);
    border-radius: var(--border-radius-small); /* Match hover radius */
}
#dropdown-sign-out-button:hover { background-color: rgba(217, 83, 79, 0.08); }

/* --- Control Visibility based on Detail View --- */
#back-button, #header-logo { display: none; }
body.is-detail-active #back-button, body.is-detail-active #header-logo { display: flex; }
body.is-detail-active #profile-button,
body.is-detail-active .refresh-button,
body.is-detail-active .search-container,
body.is-detail-active .sort-container { display: none; }
body.is-detail-active #sort-button { display: none; }

/* Main Content Area */
.main-content { flex-grow: 1; overflow: hidden; position: relative; padding-bottom: 0; }
#view-wrapper { position: absolute; top: 0; left: 0; width: 100%; height: 100%; overflow: hidden; }

/* View Container Styles */
.view {
  position: absolute; top: 0; left: 0; width: 100%; height: 100%;
  background-color: var(--color-background);
  transition: transform 0.3s cubic-bezier(0.4, 0, 0.2, 1); /* Smoother ease */
  overflow-y: auto; -webkit-overflow-scrolling: touch;
  padding: var(--spacing-lg); /* 16px */
  box-sizing: border-box; visibility: hidden;
  padding-bottom: 76px; /* Account for tab bar (60px + 16px padding) */
}
.view.view-active { transform: translateX(0%); z-index: 1; pointer-events: auto; visibility: visible; }
.view.view-left { transform: translateX(-100%); z-index: 0; pointer-events: none; visibility: visible; }
.view.view-right { transform: translateX(100%); z-index: 0; pointer-events: none; visibility: visible; }

/* View Title Styles (Categories, Items List) */
.view-title {
  padding-bottom: var(--spacing-md); /* 12px */
  text-align: right; font-size: 1.5rem;
  font-weight: 600; /* Cairo SemiBold */
  color: var(--color-text-primary);
  border-bottom: 1px solid var(--color-border);
  margin: calc(-1 * var(--spacing-lg)) calc(-1 * var(--spacing-lg)) var(--spacing-lg) calc(-1 * var(--spacing-lg)); /* Extend to edges */
  padding-left: var(--spacing-lg); padding-right: var(--spacing-lg);
  padding-top: var(--spacing-lg); /* Add top padding */
  position: sticky; top: calc(-1 * var(--spacing-lg)); /* Adjust for view padding */
  background-color: rgba(253, 253, 253, 0.9); /* Slightly transparent bg for scroll */
  backdrop-filter: blur(5px); /* Blur effect */
  z-index: 10;
}

/* Category Buttons Container */
#actual-button-list { padding: 0; }
#actual-button-list p { text-align: center; padding: var(--spacing-xxl); color: var(--color-text-secondary); }

/* Category Button (Clean Card Style) */
.category-button {
  display: block; width: 100%; margin: var(--spacing-md) 0; /* 12px */
  padding: var(--spacing-lg) var(--spacing-lg); /* 16px */
  font-size: 1.05rem;
  font-weight: 500; /* Cairo Medium */
  background-color: var(--color-surface);
  border: 1px solid var(--color-border);
  border-radius: var(--border-radius-medium); /* 8px */
  text-align: right;
  color: var(--color-text-primary);
  cursor: pointer;
  transition: background-color var(--transition-fast), box-shadow var(--transition-fast), border-color var(--transition-fast);
  box-shadow: var(--shadow-sm);
}
.category-button:hover {
  background-color: var(--color-surface);
  border-color: var(--color-primary);
  box-shadow: var(--shadow-md);
  color: var(--color-primary);
}
.category-button:active {
  box-shadow: none;
  background-color: var(--color-hover-bg);
  transform: translateY(1px);
}

/* Items List Container */
.product-list-container { padding-top: var(--spacing-sm); }

/* Items List Grid/Layout */
#items-list {
    display: grid;
    grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
    gap: var(--spacing-lg); /* 16px */
}
#items-list p { text-align: center; padding: var(--spacing-xxl); color: var(--color-text-secondary); grid-column: 1 / -1; }
.no-search-results { text-align: center; padding: var(--spacing-xxl); color: var(--color-text-secondary); grid-column: 1 / -1; }

/* Item Container Styles (Wrapper) */
.item-container { overflow: hidden; }

/* Item Row Styles (Card Style) */
.item-row {
  display: flex; align-items: center;
  border: 1px solid var(--color-border);
  padding: var(--spacing-md); /* 12px */
  background-color: var(--color-surface);
  border-radius: var(--border-radius-medium); /* 8px */
  box-shadow: var(--shadow-sm);
  width: 100%; box-sizing: border-box; cursor: pointer; text-decoration: none;
  color: inherit; font-family: inherit; font-size: inherit; text-align: right;
  transition: background-color var(--transition-fast), box-shadow var(--transition-fast), border-color var(--transition-fast);
  min-height: 70px;
}
.item-row:hover {
  background-color: var(--color-surface);
  border-color: var(--color-primary);
  box-shadow: var(--shadow-md);
}
.item-row:active {
  box-shadow: none;
  background-color: var(--color-hover-bg);
  transform: translateY(1px);
}

/* Item Image/Code/Description in List */
.list-image {
    width: 50px; height: 50px; object-fit: cover;
    margin-left: var(--spacing-md); /* RTL space */
    border-radius: var(--border-radius-small); /* 4px */
    flex-shrink: 0;
    background-color: var(--color-input-bg); /* Placeholder bg */
    border: 1px solid var(--color-border);
}
.item-details-text { /* Wrapper for code and description */
    display: flex; flex-direction: column; flex-grow: 1;
    text-align: right; overflow: hidden;
}
.item-code {
    font-size: 0.8rem; color: var(--color-text-secondary); line-height: 1.3;
    margin-bottom: var(--spacing-xs); /* 4px */
    white-space: nowrap; text-overflow: ellipsis; overflow: hidden;
}
.item-description {
    font-size: 0.95rem; font-weight: 500; /* Cairo Medium */
    color: var(--color-text-primary); line-height: 1.4;
    white-space: normal; overflow: hidden;
    display: -webkit-box; -webkit-line-clamp: 2; -webkit-box-orient: vertical;
}

/* --- Styles for Item Detail View --- */
#item-detail-view { background-color: var(--color-background); }
#item-details-content {
  max-width: 600px; margin: 0 auto; padding: 0; background: transparent;
  box-shadow: none; border-radius: 0; line-height: 1.6;
}
#item-detail-view .carousel-container,
#item-detail-view .item-text-details {
    padding: var(--spacing-lg); /* 16px */
    margin-bottom: var(--spacing-lg);
    background-color: var(--color-surface);
    border-radius: var(--border-radius-large); /* 12px */
    border: 1px solid var(--color-border);
    box-shadow: var(--shadow-sm);
}
#item-detail-view .item-text-details { padding: var(--spacing-xl); } /* More padding for text */

#item-detail-view h2 {
    color: var(--color-text-primary);
    font-weight: 700; /* Cairo Bold */
    margin-bottom: var(--spacing-md);
    margin-top: 0; text-align: right; font-size: 1.6rem;
    line-height: 1.3;
}
#item-detail-view p {
    margin-bottom: var(--spacing-lg); font-size: 1rem;
    text-align: right; color: var(--color-text-primary);
}
#item-detail-view .item-text-details > p > strong {
    font-weight: 600; /* Cairo SemiBold */
    color: var(--color-text-secondary);
    display: block; font-size: 0.85rem; margin-bottom: var(--spacing-xs);
    text-transform: uppercase; letter-spacing: 0.5px;
}
#item-detail-view a { color: var(--color-primary); text-decoration: none; font-weight: 600; }
#item-detail-view a:hover { text-decoration: underline; color: var(--color-primary-dark); }

/* Price Section Styles */
#item-detail-view .item-text-details .price-section {
  display: grid; grid-template-columns: repeat(auto-fit, minmax(140px, 1fr));
  gap: var(--spacing-lg);
  margin-top: var(--spacing-xl); padding-top: var(--spacing-xl);
  border-top: 1px solid var(--color-border);
}
#item-detail-view .item-text-details .price-item {
    background-color: var(--color-background); /* Slightly different BG */
    padding: var(--spacing-md); /* 12px */
    border-radius: var(--border-radius-medium); /* 8px */
    text-align: right; border: 1px solid var(--color-border);
}
#item-detail-view .item-text-details .price-label {
    display: block; font-size: 0.8rem; color: var(--color-text-secondary);
    margin-bottom: var(--spacing-sm); /* 8px */
    font-weight: 500; /* Cairo Medium */
}
#item-detail-view .item-text-details .price-value-line { display: flex; align-items: baseline; justify-content: flex-end; line-height: 1.2; }
#item-detail-view .item-text-details .price-value-line strong {
    font-size: 1.5rem; font-weight: 600; /* Cairo SemiBold */
    color: var(--color-text-primary);
    margin-left: var(--spacing-sm); /* RTL Space */
}
#item-detail-view .item-text-details .price-value-line .currency-symbol { height: 0.9em; width: auto; opacity: 0.7; }

/* Carousel Styles */
#item-detail-view .carousel-container {
  position: relative; overflow: hidden; width: auto;
  height: 300px;
  border-radius: var(--border-radius-large); /* Inherit section radius */
  margin: calc(-1 * var(--spacing-lg)) calc(-1 * var(--spacing-lg)) var(--spacing-lg) calc(-1 * var(--spacing-lg)); /* Extend to edges */
  background-color: var(--color-input-bg); /* Placeholder BG */
}
#item-detail-view .slides-wrapper { display: flex; height: 100%; width: 100%; transition: transform 0.4s ease-in-out; }
#item-detail-view .slide { flex: 0 0 100%; height: 100%; display: flex; align-items: center; justify-content: center; position: relative; }
#item-detail-view .carousel-image { width: 100%; height: 100%; object-fit: contain; display: block; }
#item-detail-view .carousel-dots { text-align: center; position: absolute; bottom: var(--spacing-md); width: 100%; z-index: 2; }
#item-detail-view .dot {
    height: 9px; width: 9px;
    margin: 0 var(--spacing-xs);
    background-color: rgba(0, 0, 0, 0.2);
    border: 1px solid rgba(255, 255, 255, 0.5);
    border-radius: 50%; display: inline-block; cursor: pointer;
    transition: background-color var(--transition-fast), transform var(--transition-fast);
}
#item-detail-view .dot.active { background-color: var(--color-primary); transform: scale(1.1); border-color: transparent; }

/* Tab Bar Styles */
.tab-bar {
  position: fixed; bottom: 0; left: 0; width: 100%; display: flex;
  background-color: var(--color-surface);
  box-shadow: 0 -2px 5px rgba(0, 0, 0, 0.06);
  z-index: 1000; height: 60px; flex-shrink: 0;
  border-top: 1px solid var(--color-border);
}
.tab-button {
  flex: 1; padding: var(--spacing-sm) var(--spacing-md);
  background: none; border: none; border-top: 3px solid transparent; /* Active indicator */
  font-size: 0.9rem; color: var(--color-text-secondary);
  cursor: pointer; display: flex; align-items: center; justify-content: center;
  transition: color var(--transition-fast), border-color var(--transition-fast), background-color var(--transition-fast);
  position: relative; overflow: hidden;
  font-weight: 500; /* Cairo Medium */
}
.tab-button.active {
    color: var(--color-primary);
    font-weight: 600; /* Cairo SemiBold */
    border-top-color: var(--color-primary);
    background-color: var(--color-primary-light); /* Subtle active background */
}
.tab-button:hover:not(.active) {
    color: var(--color-text-primary);
    background-color: var(--color-hover-bg);
}
.tab-button:active { background-color: var(--color-active-bg); }

/* Responsive Adjustments */
@media (max-width: 767px) {
  body { font-size: 15px; } /* Slightly smaller base on mobile */
  .view { padding: var(--spacing-md); padding-bottom: 72px; } /* 12px padding */
  #items-list { grid-template-columns: 1fr; gap: var(--spacing-md); }
  .item-row { padding: var(--spacing-sm); min-height: 65px; }
  .list-image { width: 45px; height: 45px; margin-left: var(--spacing-sm); }
  .item-description { font-size: 0.9rem; -webkit-line-clamp: 2; }
  .item-code { font-size: 0.75rem; }
  .tab-button { font-size: 0.8rem; }
  .view-title { font-size: 1.3rem; margin: calc(-1 * var(--spacing-md)) calc(-1 * var(--spacing-md)) var(--spacing-lg) calc(-1 * var(--spacing-md)); padding-left: var(--spacing-md); padding-right: var(--spacing-md); padding-top: var(--spacing-md); }
  .category-button { padding: var(--spacing-md) var(--spacing-lg); font-size: 1rem; }
  #profile-dropdown { left: 10px; right: auto; min-width: 220px; }
  #item-details-content { padding: 0; }
  #item-detail-view .carousel-container,
  #item-detail-view .item-text-details {
      border-radius: 0; margin-left: calc(-1 * var(--spacing-md)); margin-right: calc(-1 * var(--spacing-md));
      border-left: none; border-right: none; box-shadow: none;
      padding-left: var(--spacing-md); padding-right: var(--spacing-md);
  }
  #item-detail-view .item-text-details { padding-top: var(--spacing-xl); padding-bottom: var(--spacing-xl); }
  #item-detail-view .carousel-container { border-top: none; height: 250px; }
  #item-detail-view .carousel-image { object-fit: cover; }
  #header-logo { height: 55%; }
  #item-detail-view .item-text-details .price-value-line strong { font-size: 1.4rem; }
  #item-detail-view .item-text-details .price-section { grid-template-columns: repeat(auto-fit, minmax(110px, 1fr)); gap: var(--spacing-md);}
}

@media (max-width: 480px) {
    #item-detail-view .item-text-details .price-value-line strong { font-size: 1.3rem; }
}

@media (max-width: 400px) {
    .search-bar { padding: var(--spacing-xs) var(--spacing-sm); height: 54px; }
    .header-button svg { width: 18px; height: 18px; }
    .header-button { width: 34px; height: 34px; }
    .search-container { margin: 0 var(--spacing-sm); }
    .search-input { font-size: 0.9rem; height: 36px; padding: 6px 12px; padding-left: 30px; }
    #clear-search-button { font-size: 18px; left: 3px; width: 28px; height: 28px;}
    #profile-dropdown { top: 50px; left: 10px; right: auto; }
    #item-detail-view .carousel-container { height: 220px; }
    .tab-bar { height: 54px; }
    .view { padding-bottom: 66px; }
    #header-logo { height: 50%; }
    #item-detail-view .item-text-details .price-section { grid-template-columns: 1fr; }
}

/* Item Click Transition */
.item-clicked { transition: opacity var(--transition-fast), transform var(--transition-fast); opacity: 0.7; transform: scale(0.98); }

/* Desktop Layout for Item Detail View */
@media (min-width: 768px) {
  #item-detail-view { overflow-y: auto; background-color: var(--color-background); padding: var(--spacing-xl); }
  #item-details-content {
      display: grid; grid-template-columns: minmax(300px, 1fr) 1.3fr; /* Image column | Text column */
      gap: var(--spacing-xl); /* 24px */
      max-width: 1150px; /* Wider max width */
      margin: 0 auto; padding: 0; align-items: start; background: transparent; box-shadow: none;
  }
  #item-detail-view .carousel-container,
  #item-detail-view .item-text-details {
      margin: 0; border-radius: var(--border-radius-large); /* Restore radius */
      border: 1px solid var(--color-border); box-shadow: var(--shadow-sm);
      padding: var(--spacing-lg); /* Base padding */
  }
  #item-detail-view .carousel-container {
      width: 100%; height: 500px; margin-bottom: 0; padding: 0;
      background-color: var(--color-input-bg); overflow: hidden;
  }
  #item-detail-view .carousel-image { object-fit: cover; }
  #item-detail-view .item-text-details { margin-bottom: 0; padding: var(--spacing-xxl); } /* More padding for text */
  #item-detail-view .item-text-details h2 { margin-top: 0; }
  #item-detail-view .item-text-details .price-section { grid-template-columns: repeat(auto-fit, minmax(160px, 1fr)); }
}

/* Utility for visually hiding but accessible to screen readers */
.sr-only {
  position: absolute; width: 1px; height: 1px; padding: 0; margin: -1px;
  overflow: hidden; clip: rect(0, 0, 0, 0); white-space: nowrap; border-width: 0;
}
